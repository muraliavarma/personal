---
import Layout from '../layouts/Layout.astro';
import ProjectItem from '../components/ProjectItem.astro';
import { getCollection } from 'astro:content';

// Get all projects from the content collection
const allProjects = await getCollection('projects');
// Sort by sortOrder and take the top 3 for the homepage
const featuredProjects = allProjects
  .sort((a, b) => a.data.sortOrder - b.data.sortOrder)
  .slice(0, 3);

// Welcome to Astro! Wondering what to do next? Check out the Astro documentation at https://docs.astro.build
// Don't want to use any of this? Delete everything in this file, the `assets`, `components`, and `layouts` directories, and start fresh.
---

<Layout>
	<section class="intro">
		<h1>Murali Varma</h1>
		<h2>Full Stack Developer</h2>
		<p>
			I am a Full Stack Developer living in the Bay Area. I love keeping myself up-to-date with the latest front-end technologies and build backends that scale with it.
		</p>
		<p>
			In fact, when I had first made this website, it was in <a href="https://angularjs.org/">AngularJS</a>. Later I moved to a minimal <a href="https://bulma.io/">Bulma</a> framework. Then it used <a href="https://vuepress.vuejs.org/">VuePress</a> deployed on <a href="https://www.netlify.com/">Netlify</a>. Now it's built with <a href="https://astro.build">Astro</a>.
		</p>
		<div class="cta-buttons">
			<a href="/projects" class="cta-button primary">View My Projects</a>
			<a href="/about" class="cta-button">About Me</a>
		</div>
	</section>

	<section class="projects">
		{featuredProjects.map((project) => (
			<>
				<h2>{project.data.title}</h2>
				<ProjectItem 
					tags={project.data.tags} 
					urlLink={project.data.urlLink}
					urlText={project.data.urlText}
				>
					<div slot="description" set:html={project.body} />
					{project.data.image && (
						<img slot="image" src={project.data.image} alt={`${project.data.title} screenshot`} />
					)}
				</ProjectItem>
			</>
		))}
		
		<div class="see-more">
			<a href="/projects" class="cta-button primary">See All Projects</a>
		</div>
	</section>
</Layout>

<style>
	.intro {
		max-width: 800px;
		margin: 4rem auto;
		text-align: center;
		padding: 0 1.5rem;
	}
	
	h1 {
		font-size: 3.5rem;
		margin-bottom: 0.5rem;
		color: var(--primary-color);
		font-weight: 800;
	}
	
	h2 {
		font-size: 1.6rem;
		font-weight: 500;
		margin-bottom: 2rem;
		color: var(--text-light);
		letter-spacing: 0.5px;
	}
	
	p {
		line-height: 1.8;
		margin-bottom: 1.5rem;
		font-size: 1.1rem;
		color: var(--text-color);
	}

	.cta-buttons {
		display: flex;
		justify-content: center;
		gap: 1.2rem;
		margin-top: 2.5rem;
	}

	.cta-button {
		display: inline-block;
		padding: 0.85rem 1.8rem;
		border-radius: 6px;
		font-weight: 600;
		font-size: 1rem;
		transition: all 0.3s ease;
		text-decoration: none;
		box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
	}

	.cta-button.primary {
		background-color: var(--primary-color);
		color: white;
	}

	.cta-button.primary:hover {
		background-color: var(--primary-dark);
		transform: translateY(-2px);
		box-shadow: 0 4px 12px rgba(79, 70, 229, 0.25);
		text-decoration: none;
	}

	.cta-button:not(.primary) {
		border: 2px solid var(--border-color);
		color: var(--text-color);
	}

	.cta-button:not(.primary):hover {
		border-color: var(--primary-light);
		background-color: var(--background-alt);
		transform: translateY(-2px);
		box-shadow: 0 4px 12px rgba(0, 0, 0, 0.07);
		text-decoration: none;
	}

	.projects {
		padding: 2rem 1.5rem;
		background-color: var(--background-alt);
		border-radius: 12px;
		margin: 4rem 0;
	}
	
	.projects h2 {
		color: var(--primary-color);
		font-weight: 700;
		margin-top: 2rem;
		font-size: 1.8rem;
		text-align: center;
	}

	.see-more {
		margin: 3.5rem 0 1.5rem;
		text-align: center;
	}

	@media (max-width: 768px) {
		.intro {
			margin: 2.5rem auto;
		}

		h1 {
			font-size: 2.8rem;
		}

		h2 {
			font-size: 1.3rem;
		}

		.cta-buttons {
			flex-direction: column;
			align-items: center;
			gap: 0.8rem;
		}

		.cta-button {
			width: 100%;
			text-align: center;
		}
	}
</style>
